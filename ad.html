<!doctype html>
<html>
<head>
    <title>Bids</title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
</head>
<body>
<script>

var colors = [
    //'red',
    'orange',
    'yellow',
    'green',
    'blue',
    'indigo',
    'violet',
];

$(document).ready(function() {
    var bgcolor = 'white';

    var jqxhr = $.getJSON('http://localhost:3031/ad?param1='+Date.now(), function() {
        console.log("success");
    })
    .done(function(data) {
        console.log("second success");
        if (data['id']) {
            bgcolor = colors[data['id'] % colors.length];
        } else {
            bgcolor = 'black';
        }
        console.log('bgcolor', bgcolor);
    })
    .fail(function() {
        console.log("error");
        bgcolor = 'red';
    })
    .always(function() {
        //console.log("complete");
        $('body').attr('bgcolor', bgcolor);
    });
});
</script>
</body>
</html>
